/*! For license information please see tool.js.LICENSE.txt */
(()=>{"use strict";var e,t={712:(e,t,r)=>{const n=Vue;var o={key:0},a={class:"flex flex-row items-center justify-between"},i={class:"mb-3 text-90 font-normal text-2xl"},l={class:"card"},c={"data-testid":"resource-table",class:"table w-full rounded-lg overflow-hidden shadow"},s={class:"bg-gray-50 dark:bg-gray-700"},u=(0,n.createElementVNode)("th",null,null,-1),d={class:"text-left text-gray-500 dark:text-gray-400 py-2"},f={class:"text-left text-gray-500 dark:text-gray-400 py-2"},p={class:"text-left text-gray-500 dark:text-gray-400 py-2"},h={class:"text-left text-gray-500 dark:text-gray-400 py-2"},m={class:"text-left text-gray-500 dark:text-gray-400 py-2"},v={key:0,class:"text-gray-500 py-2"},y={class:"group bg-white dark:bg-gray-800"},g={class:"py-2 border-t border-gray-100 dark:border-gray-800"},w={class:"px-4"},b={key:0,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"save",class:"h-4 text-60 svg-inline--fa fa-save fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},x=[(0,n.createElementVNode)("path",{fill:"currentColor",d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},null,-1)],k={key:1,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"save",class:"h-4 text-60 svg-inline--fa fa-save fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},E=[(0,n.createElementVNode)("path",{fill:"currentColor",d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},null,-1)],N={key:2,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"trash-alt",class:"h-4 text-60 svg-inline--fa fa-trash-alt fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},_=[(0,n.createElementVNode)("path",{fill:"currentColor",d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},null,-1)],V={class:"py-2 border-t border-gray-100 dark:border-gray-800"},L={class:"py-2 border-t border-gray-100 dark:border-gray-800"},S={class:"py-2 border-t border-gray-100 dark:border-gray-800"},C={class:"py-2 border-t border-gray-100 dark:border-gray-800"},B={class:"my-2"},O={class:"inline-block bg-30 p-1 rounded-sm mr-2 font-bold"},D={class:"py-2 border-t border-gray-100 dark:border-gray-800"},A={class:"my-2"},j={class:"inline-block bg-30 p-1 rounded-sm mr-2 font-bold"},I={key:0,class:"py-2 text-center border-t border-gray-100 dark:border-gray-800"},F=["onClick"],P=(0,n.createElementVNode)("defs",{id:"defs3455"},null,-1),T=(0,n.createElementVNode)("g",{transform:"matrix(1,0,0,-1,113.89831,1262.6441)",id:"g3449"},[(0,n.createElementVNode)("path",{d:"M 1536,640 Q 1536,484 1475,342 1414,200 1311,97 1208,-6 1066,-67 924,-128 768,-128 589,-128 431.5,-52 274,24 165.5,161 57,298 18,473 q -3,14 7,27 9,12 25,12 h 199 q 23,0 30,-23 Q 329,327 464,227.5 599,128 768,128 872,128 966.5,168.5 1061,209 1130,278 q 69,69 109.5,163.5 40.5,94.5 40.5,198.5 0,104 -40.5,198.5 Q 1199,933 1130,1002 1061,1071 966.5,1111.5 872,1152 768,1152 670,1152 580,1116.5 490,1081 420,1015 L 557,877 q 31,-30 14,-69 -17,-40 -59,-40 H 64 Q 38,768 19,787 0,806 0,832 v 448 q 0,42 40,59 39,17 69,-14 l 130,-129 q 107,101 244.5,156.5 137.5,55.5 284.5,55.5 156,0 298,-61 142,-61 245,-164 103,-103 164,-245 61,-142 61,-298 z",id:"path3451","inkscape:connector-curvature":"0",style:{fill:"currentColor"}})],-1),z={class:"bg-20 rounded-b","per-page":"5","resource-count-label":"1-3 of 3","current-resource-count":"3","all-matching-resource-count":"3"},G={class:"flex justify-between items-center"},M=["disabled"],R={class:"text-sm text-80 px-4"},H=["disabled"];var q={class:"p-8"},$={class:"table w-full mt-4"},Q={style:{"max-width":"20px"}},Y={style:{"max-width":"20px"},class:"text-center"},Z=["value"],U={class:"text-center"},J={class:"text-center"},K={key:0},W={colspan:"4",class:"text-center"},X={class:"bg-30 px-6 py-3 flex"},ee={class:"ml-auto"};function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(){re=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return _()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var l=b(i,r);if(l){if(l===u)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function f(){}function p(){}var h={};l(h,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(N([])));v&&v!==t&&r.call(v,o)&&(h=v);var y=p.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(o,a,i,l){var c=s(e[o],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==te(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function N(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return f.prototype=p,l(y,"constructor",p),l(p,"constructor",f),f.displayName=l(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(c(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(y),l(y,i,"Generator"),l(y,o,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function ne(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}const oe={props:["fields","audit","resourceName","resourceId"],data:function(){return{restoreIds:[],selectAll:!1}},methods:{handleClose:function(){this.$emit("close")},handleConfirm:function(){var e,t=this;return(e=re().mark((function e(){var r,n;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.restoreIds.length>0)){e.next=6;break}return e.next=3,Nova.request().post("/nova-vendor/auditable-log/audits/".concat(t.resourceName,"/").concat(t.resourceId,"/").concat(t.audit.id),{restore:t.restoreIds});case 3:r=e.sent,n=t.restoreIds.map((function(e){return{key:e,value:r.data.record[e]}})),t.$emit("restored",n);case 6:t.$emit("close");case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ne(a,n,o,i,l,"next",e)}function l(e){ne(a,n,o,i,l,"throw",e)}i(void 0)}))})()},toggleSelectAll:function(){this.allSelected?this.restoreIds=[]:this.restoreIds=this.comparison.map((function(e){return e.key}))}},computed:{allSelected:function(){return this.comparison.length===this.restoreIds.length},comparison:function(){var e=this;return Object.keys(this.audit.new_values).map((function(t){return void 0===e.fields[t]||e.fields[t].value==e.audit.new_values[t]?null:{key:t,label:e.fields[t].label,current:e.fields[t].value,restore:e.audit.new_values[t]}})).filter((function(e){return null!==e}))}}};var ae=r(744);function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function le(){le=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new E(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return _()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var l=b(i,r);if(l){if(l===u)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function f(){}function p(){}var h={};l(h,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(N([])));v&&v!==t&&r.call(v,o)&&(h=v);var y=p.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(o,a,i,l){var c=s(e[o],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==ie(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function N(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return f.prototype=p,l(y,"constructor",p),l(p,"constructor",f),f.displayName=l(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(c(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(y),l(y,i,"Generator"),l(y,o,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function ce(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function se(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ce(a,n,o,i,l,"next",e)}function l(e){ce(a,n,o,i,l,"throw",e)}i(void 0)}))}}const ue={props:["resourceName","resourceId","field"],components:{RestoreAuditModal:(0,ae.Z)(oe,[["render",function(e,t,r,o,a,i){var l=(0,n.resolveComponent)("heading"),c=(0,n.resolveComponent)("checkbox"),s=(0,n.resolveComponent)("modal");return(0,n.openBlock)(),(0,n.createBlock)(s,{onModalClose:i.handleClose},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("form",{onSubmit:t[2]||(t[2]=(0,n.withModifiers)((function(){return i.handleConfirm&&i.handleConfirm.apply(i,arguments)}),["prevent"])),"slot-scope":"props",class:"bg-white rounded-lg shadow-lg overflow-hidden",style:{width:"750px"}},[(0,n.renderSlot)(e.$slots,"default",{},(function(){return[(0,n.createElementVNode)("div",q,[(0,n.createVNode)(l,{level:2,class:"mb-6"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.__("Restore audit")),1)]})),_:1}),(0,n.createElementVNode)("table",$,[(0,n.createElementVNode)("thead",null,[(0,n.createElementVNode)("th",Q,[(0,n.createVNode)(c,{onInput:i.toggleSelectAll,checked:i.allSelected},null,8,["onInput","checked"])]),(0,n.createElementVNode)("th",null,(0,n.toDisplayString)(e.__("Field")),1),(0,n.createElementVNode)("th",null,(0,n.toDisplayString)(e.__("Current")),1),(0,n.createElementVNode)("th",null,(0,n.toDisplayString)(e.__("Restore to")),1)]),(0,n.createElementVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(i.comparison,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("tr",null,[(0,n.createElementVNode)("td",Y,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.restoreIds=e}),value:e.key},null,8,Z),[[n.vModelCheckbox,a.restoreIds]])]),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.label),1),(0,n.createElementVNode)("td",U,(0,n.toDisplayString)(e.current),1),(0,n.createElementVNode)("td",J,(0,n.toDisplayString)(e.restore),1)])})),256)),0==i.comparison.length?((0,n.openBlock)(),(0,n.createElementBlock)("tr",K,[(0,n.createElementVNode)("td",W,(0,n.toDisplayString)(e.__("No changes")),1)])):(0,n.createCommentVNode)("",!0)])])])]})),(0,n.createElementVNode)("div",X,[(0,n.createElementVNode)("div",ee,[(0,n.createElementVNode)("button",{type:"button","data-testid":"cancel-button",dusk:"cancel-delete-button",onClick:t[1]||(t[1]=(0,n.withModifiers)((function(){return i.handleClose&&i.handleClose.apply(i,arguments)}),["prevent"])),class:"btn text-80 font-normal h-9 px-3 mr-3 btn-link"},(0,n.toDisplayString)(e.__("Cancel")),1),(0,n.createElementVNode)("button",{id:"confirm-delete-button",ref:"confirmButton","data-testid":"confirm-button",type:"submit",class:"btn btn-default btn-danger"},(0,n.toDisplayString)(e.__("Restore")),513)])])],32)]})),_:3},8,["onModalClose"])}]])},data:function(){return{audits:[],displayAudits:!1,pagination:{},restore:null,parentFields:[],canRestore:!1}},mounted:function(){var e,t;!0===this.displayAudits&&this.fetchAudits(),this.parentFields=(e=this.$parent.$parent.$.vnode.component.data.panels[0].fields,t={},e.filter((function(e){return""!==e.attribute})).forEach((function(e){if(""!==e.attribute){var r=e.attribute,n=e.value,o=e.name;t[r]={value:n,label:o}}})),t.length!==e.length&&e.filter((function(e){return""===e.attribute&&void 0!==e.dependencies&&e.dependencies.length===e.dependencies.filter((function(e){return e.satisfied})).length})).forEach((function(e){e.fields.forEach((function(e){var r=e.attribute,n=e.value,o=e.name;t[r]={value:n,label:o}}))})),t)},methods:{showAndFetch:function(){this.displayAudits=!0,this.fetchAudits()},close:function(){this.displayAudits=!1},fetchAudits:function(){var e=arguments,t=this;return se(le().mark((function r(){var n,o,a;return le().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(n=e.length>0&&void 0!==e[0]?e[0]:null)||(n="/nova-vendor/auditable-log/audits/".concat(t.resourceName,"/").concat(t.resourceId)),r.prev=2,r.next=5,Nova.request().get(n);case 5:o=r.sent,a=o.data,t.audits=a.audits.data,t.pagination=a.audits,t.canRestore=a.restore,r.next=14;break;case 12:r.prev=12,r.t0=r.catch(2);case 14:case"end":return r.stop()}}),r,null,[[2,12]])})))()},formatData:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push({name:r,value:e[r]});return t},showRestoreAudit:function(e){this.restore=e},restored:function(e){var t=this;e.forEach((function(e){t.parentFields[e.key].value=e.value})),this.fetchAudits()}}},de=(0,ae.Z)(ue,[["render",function(e,t,r,q,$,Q){var Y=(0,n.resolveComponent)("DefaultButton"),Z=(0,n.resolveComponent)("sodipodi:namedview"),U=(0,n.resolveComponent)("restore-audit-modal");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[$.displayAudits?((0,n.openBlock)(),(0,n.createElementBlock)("div",o,[(0,n.createElementVNode)("div",a,[(0,n.createElementVNode)("h2",i,(0,n.toDisplayString)(e.__("Audit Log")),1),$.displayAudits?((0,n.openBlock)(),(0,n.createBlock)(Y,{key:0,class:"btn btn-default btn-primary ml-4 mb-2",onClick:(0,n.withModifiers)(Q.close,["prevent"])},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.__("Close Audit Log")),1)]})),_:1},8,["onClick"])):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("table",c,[(0,n.createElementVNode)("thead",s,[(0,n.createElementVNode)("tr",null,[u,(0,n.createElementVNode)("th",d,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.__("User")),1)]),(0,n.createElementVNode)("th",f,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.__("Event")),1)]),(0,n.createElementVNode)("th",p,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.__("Date/Time")),1)]),(0,n.createElementVNode)("th",h,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.__("Old Values")),1)]),(0,n.createElementVNode)("th",m,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.__("New Values")),1)]),$.canRestore?((0,n.openBlock)(),(0,n.createElementBlock)("th",v)):(0,n.createCommentVNode)("",!0)])]),(0,n.createElementVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)($.audits,(function(t){return(0,n.openBlock)(),(0,n.createElementBlock)("tr",y,[(0,n.createElementVNode)("td",g,[(0,n.createElementVNode)("div",w,["created"===t.event?((0,n.openBlock)(),(0,n.createElementBlock)("svg",b,x)):(0,n.createCommentVNode)("",!0),"updated"===t.event?((0,n.openBlock)(),(0,n.createElementBlock)("svg",k,E)):(0,n.createCommentVNode)("",!0),"deleted"===t.event?((0,n.openBlock)(),(0,n.createElementBlock)("svg",N,_)):(0,n.createCommentVNode)("",!0)])]),(0,n.createElementVNode)("td",V,(0,n.toDisplayString)(t.user?t.user.name:e.__("console")),1),(0,n.createElementVNode)("td",L,(0,n.toDisplayString)(t.event),1),(0,n.createElementVNode)("td",S,(0,n.toDisplayString)(t.created_at),1),(0,n.createElementVNode)("td",C,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(Q.formatData(t.old_values),(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("div",B,[(0,n.createElementVNode)("span",O,(0,n.toDisplayString)(e.name),1),(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.value),1)])})),256))]),(0,n.createElementVNode)("td",D,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(Q.formatData(t.new_values),(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("div",A,[(0,n.createElementVNode)("span",j,(0,n.toDisplayString)(e.name),1),(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.value),1)])})),256))]),$.canRestore?((0,n.openBlock)(),(0,n.createElementBlock)("td",I,[((0,n.openBlock)(),(0,n.createElementBlock)("svg",{onClick:function(e){return Q.showRestoreAudit(t)},style:{"max-width":"20px"},"xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:cc":"http://creativecommons.org/ns#","xmlns:rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape",viewBox:"0 -256 1792 1792",id:"svg3447",version:"1.1","inkscape:version":"0.48.3.1 r9886",width:"100%",height:"100%","sodipodi:docname":"undo_font_awesome.svg"},[P,(0,n.createVNode)(Z,{pagecolor:"#ffffff",bordercolor:"#666666",borderopacity:"1",objecttolerance:"10",gridtolerance:"10",guidetolerance:"10","inkscape:pageopacity":"0","inkscape:pageshadow":"2","inkscape:window-width":"640","inkscape:window-height":"480",id:"namedview3453",showgrid:"false","inkscape:zoom":"0.13169643","inkscape:cx":"896","inkscape:cy":"896","inkscape:window-x":"0","inkscape:window-y":"25","inkscape:window-maximized":"0","inkscape:current-layer":"svg3447"}),T],8,F))])):(0,n.createCommentVNode)("",!0)])})),256))])]),(0,n.createElementVNode)("div",z,[(0,n.createElementVNode)("nav",G,[(0,n.createElementVNode)("button",{disabled:null===$.pagination.prev_page_url,rel:"prev",dusk:"previous",class:(0,n.normalizeClass)(["btn btn-link py-3 px-4 text-80",{"opacity-50":null===$.pagination.prev_page_url,"text-primary":null!==$.pagination.prev_page_url}]),onClick:t[0]||(t[0]=function(e){return Q.fetchAudits($.pagination.prev_page_url)})},(0,n.toDisplayString)(e.__("Previous")),11,M),(0,n.createElementVNode)("span",R,(0,n.toDisplayString)($.pagination.from)+"-"+(0,n.toDisplayString)($.pagination.to)+" of "+(0,n.toDisplayString)($.pagination.total),1),(0,n.createElementVNode)("button",{disabled:null===$.pagination.next_page_url,rel:"next",dusk:"next",class:(0,n.normalizeClass)([{"opacity-50":null===$.pagination.next_page_url,"text-primary":null!==$.pagination.next_page_url},"btn btn-link py-3 px-4 text-80"]),onClick:t[1]||(t[1]=function(e){return Q.fetchAudits($.pagination.next_page_url)})},(0,n.toDisplayString)(e.__("Next")),11,H)])])])])):(0,n.createCommentVNode)("",!0),!1===$.displayAudits?((0,n.openBlock)(),(0,n.createBlock)(Y,{key:1,onClick:(0,n.withModifiers)(Q.showAndFetch,["prevent"])},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.__("View Audit Log")),1)]})),_:1},8,["onClick"])):(0,n.createCommentVNode)("",!0),null!==$.restore?((0,n.openBlock)(),(0,n.createBlock)(U,{key:2,fields:$.parentFields,resourceName:r.resourceName,resourceId:r.resourceId,audit:$.restore,onClose:t[2]||(t[2]=function(e){return $.restore=null}),onRestored:Q.restored},null,8,["fields","resourceName","resourceId","audit","onRestored"])):(0,n.createCommentVNode)("",!0)])}]]);Nova.booting((function(e,t,r){e.component("auditable-log",de)}))},288:()=>{},744:(e,t)=>{t.Z=(e,t)=>{const r=e.__vccOpts||e;for(const[e,n]of t)r[e]=n;return r}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,r,o,a)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,o,a]=e[u],l=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(l=!1,a<i&&(i=a));if(l){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={103:0,990:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[i,l,c]=r,s=0;if(i.some((t=>0!==e[t]))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(c)var u=c(n)}for(t&&t(r);s<i.length;s++)a=i[s],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},r=self.webpackChunkvendor_auditable_log=self.webpackChunkvendor_auditable_log||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.O(void 0,[990],(()=>n(712)));var o=n.O(void 0,[990],(()=>n(288)));o=n.O(o)})();